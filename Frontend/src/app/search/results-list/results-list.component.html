<section class="search">
  <app-search [filters]="{ 'measurements': true, 'projects': true, 'recipes': true }"></app-search>
  <section class="search__cards">
      <mat-list infiniteScroll
                [infiniteScrollUpDistance]="2"
                [infiniteScrollThrottle]="50"
                (scrolled)="onScroll()"
                [scrollWindow]="false"
                *ngIf="searchItems$">
          <ng-container *ngFor="let item of searchItems$ | async">
            <ng-container *ngIf="item.type === 'Measurement'">
              <mat-list-item (click)="selectItem(item)" class="row">
                <mat-icon matListItemIcon>science</mat-icon>
                <div matListItemTitle>{{$any(item.item).code}}</div>
                <div matListItemLine>{{$any(item.item).project}}, {{$any(item.item).createdAtUtc | timeAgo}}</div>
              </mat-list-item>
            </ng-container>

            <ng-container *ngIf="item.type === 'Project'">
              <mat-list-item (click)="selectItem(item)" class="row">
                <mat-icon matListItemIcon>folder</mat-icon>
                <div matListItemTitle>{{$any(item.item).name}}</div>
                <div matListItemLine>Project</div>
              </mat-list-item>
            </ng-container>
            <mat-divider></mat-divider>
          </ng-container>
      </mat-list>
    <app-item-details [itemType]="selectedItemType" [itemId]="selectedItemId"></app-item-details>
  </section>
</section>
